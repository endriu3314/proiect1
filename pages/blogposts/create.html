<!DOCTYPE html>
<html>
  <head>
    <title>Create Post - Proiect1</title>
    <link
      href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script type="module" src="../../assets/js/utils/loopSelected.js"></script>
    <script type="module" src="../../assets/js/blogposts/blogposts.js"></script>
  </head>

  <body>
    <nav class="flex items-center justify-between flex-wrap bg-indigo-800 p-6">
      <div class="flex items-center flex-shrink-0 text-white mr-6">
        <span class="font-semibold text-xl tracking-tight">proiect1</span>
      </div>
      <div class="w-full block flex-grow lg:flex lg:items-center lg:w-auto">
        <div class="text-sm lg:flex-grow">
          <a
            href="../../pages/blogposts/"
            class="block mt-4 lg:inline-block lg:mt-0 text-white hover:text-gray-400 mr-4"
          >
            blogposts
          </a>
          <a
            href="../../pages/categories"
            class="block mt-4 lg:inline-block lg:mt-0 text-white hover:text-gray-400 mr-4"
          >
            categories
          </a>
        </div>
      </div>
    </nav>

    <div class="flex items-center justify-center h-screen">
      <div
        class="bg-indigo-800 text-white font-bold rounded-lg border shadow-lg p-5 w-1/2"
      >
        <form class="sadow-md bg-white rounded px-8 pt-6 pb-8" id="form-create">
          <div class="mb-4">
            <label
              class="block text-gray-700 text-sm font-bold mb-2"
              for="title"
            >
              Title
            </label>
            <input
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              id="title"
              name="title"
              type="text"
              placeholder="Title"
            />
          </div>

          <div class="mb-4">
            <label
              class="block text-gray-700 text-sm font-bold mb-2"
              for="category_id"
            >
              Category
            </label>

            <select
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
              name="category_id"
              id="category_id"
              multiple="multiple"
            ></select>
          </div>

          <div class="mb-6">
            <label
              class="block text-gray-700 text-sm font-bold mb-2"
              for="body"
            >
              Body
            </label>

            <textarea
              class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
              id="body"
              name="body"
              type="text"
              placeholder="Body"
            ></textarea>
          </div>

          <div class="flex items-center justify-between">
            <button
              class="bg-indigo-600 hover:bg-indigo-800 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
              type="button"
              id="submit"
            >
              Create
            </button>
          </div>
        </form>
      </div>
    </div>
  </body>

  <script>
    const select = document.getElementById('category_id');
    fetch('http://localhost/proiect1/assets/php/api/categories/get_all.php', {
      mode: 'cors',
      headers: {
        'Access-Control-Allow-Origin': '*',
      },
    })
      .then((response) => response.json())
      .then(function (data) {
        let title = data.body;
        return title.map(function (categ) {
          let option = document.createElement('option');
          option.value = categ.id;
          option.innerHTML = `${categ.name}`;
          select.appendChild(option);
        });
      })
      .catch(function (error) {
        console.log(error);
      });
  </script>
</html>
